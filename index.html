<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Åæ„Å§ÊØõ„Ç®„ÇØ„Çπ„ÉÜ„Çµ„É≠„É≥ Êó•Â†±„ÉªÁõÆÊ®ôÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É† v2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ffeef7 0%, #ffe0f0 50%, #ffcce6 100%);
            min-height: 100vh;
            padding: 10px;
        }
        
        .container {
            max-width: 420px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 20px 20px 0 0;
        }
        
        .header h1 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 0.9em;
        }
        
        .login-form, .main-content {
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }
        
        input[type="text"], input[type="password"], input[type="date"], input[type="number"], input[type="month"], textarea, select {
            width: 100%;
            padding: 15px;
            border: 2px solid #ffe0f0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: rgba(255, 240, 250, 0.5);
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #ff69b4;
            background: rgba(255, 240, 250, 0.8);
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.2);
        }
        
        .password-container {
            position: relative;
        }
        
        .password-container input {
            padding-right: 50px;
        }
        
        .password-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #ff69b4;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            z-index: 10;
        }
        
        .btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            touch-action: manipulation;
        }
        
        .btn:hover, .btn:focus {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 20, 147, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn.secondary {
            background: linear-gradient(135deg, #dda0dd 0%, #ba55d3 100%);
        }
        
        .btn.logout {
            background: linear-gradient(135deg, #ffa500 0%, #ff6347 100%);
            margin-top: 20px;
        }
        
        .btn.success {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        }
        
        .hidden {
            display: none !important;
        }
        
        .tabs {
            display: flex;
            background: rgba(255, 240, 250, 0.8);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 25px;
        }
        
        .tab {
            flex: 1;
            padding: 15px 10px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(255, 105, 180, 0.3);
        }
        
        .tab:hover:not(.active) {
            background: rgba(255, 105, 180, 0.1);
            color: #ff69b4;
        }
        
        .info-text {
            text-align: center;
            color: #888;
            font-size: 14px;
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 240, 250, 0.3);
            border-radius: 8px;
            border-left: 4px solid #ff69b4;
        }
        
        .summary-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .status-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1000;
            background: #4CAF50;
            color: white;
        }
        
        .data-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .data-item {
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .data-item.total { background: rgba(255, 20, 147, 0.1); }
        .data-item.technical { background: rgba(76, 205, 196, 0.1); }
        .data-item.retail { background: rgba(255, 165, 0, 0.1); }
        .data-item.customer { background: rgba(138, 43, 226, 0.1); }
        
        .data-label {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .data-value {
            font-size: 20px;
            font-weight: bold;
        }
        
        .data-item.total .data-label { color: #ff1493; }
        .data-item.total .data-value { color: #ff1493; }
        .data-item.technical .data-label { color: #4ecdc4; }
        .data-item.technical .data-value { color: #4ecdc4; }
        .data-item.retail .data-label { color: #ffa500; }
        .data-item.retail .data-value { color: #ffa500; }
        .data-item.customer .data-label { color: #8a2be2; }
        .data-item.customer .data-value { color: #8a2be2; }
        
        .employee-list {
            background: rgba(255, 240, 250, 0.5);
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .success-message {
            position: fixed;
            top: 50px;
            right: 10px;
            background: #4CAF50;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 1001;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- „É≠„Ç∞„Ç§„É≥ÁîªÈù¢ -->
        <div id="loginScreen">
            <div class="header">
                <h1>üéÄ „Åæ„Å§ÊØõ„Ç®„ÇØ„Çπ„ÉÜ„Çµ„É≠„É≥</h1>
                <p>Êó•Â†±„ÉªÁõÆÊ®ôÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É† v2</p>
            </div>
            <div class="login-form">
                <div class="form-group">
                    <label for="loginName">ÂêçÂâç</label>
                    <input type="text" id="loginName" placeholder="„ÅäÂêçÂâç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ">
                </div>
                <div class="form-group">
                    <div class="password-container">
                        <label for="loginPassword">„Éë„Çπ„ÉØ„Éº„Éâ</label>
                        <input type="password" id="loginPassword" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ">
                        <button type="button" class="password-toggle" onclick="togglePassword('loginPassword')">üëÅÔ∏è</button>
                    </div>
                </div>
                <button class="btn" onclick="employeeLogin()">Á§æÂì°„É≠„Ç∞„Ç§„É≥</button>
                <button class="btn secondary" onclick="adminLogin()">ÁÆ°ÁêÜËÄÖ„É≠„Ç∞„Ç§„É≥</button>
                <div class="info-text">
                    <strong>ÁÆ°ÁêÜËÄÖ„Éë„Çπ„ÉØ„Éº„Éâ:</strong> admin123<br>
                    Êñ∞Ë¶èÁ§æÂì°ÁôªÈå≤„ÅØÁÆ°ÁêÜËÄÖÁîªÈù¢„Åã„ÇâË°å„Åà„Åæ„Åô
                </div>
            </div>
        </div>

        <!-- Á§æÂì°„É°„Ç§„É≥ÁîªÈù¢ -->
        <div id="employeeMain" class="main-content hidden">
            <div class="header">
                <h1>Á§æÂì°ÁîªÈù¢</h1>
                <p id="employeeWelcome">„Åì„Çì„Å´„Å°„ÅØÔºÅ</p>
            </div>
            
            <div class="tabs">
                <button class="tab active" onclick="showTab('dailyReport')">Êó•Â†±ÂÖ•Âäõ</button>
                <button class="tab" onclick="showTab('monthlySummary')">ÊúàÊ¨°„Çµ„Éû„É™„Éº</button>
            </div>
            
            <!-- Êó•Â†±ÂÖ•Âäõ„Çø„Éñ -->
            <div id="dailyReportTab" class="tab-content">
                <div class="summary-card">
                    <h3 style="color: #ff69b4; margin-bottom: 15px;">üìã Êú¨Êó•„ÅÆÊó•Â†±</h3>
                    <div class="form-group">
                        <label for="totalSales">Á∑èÂ£≤‰∏ä (ÂÜÜ)</label>
                        <input type="number" id="totalSales" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label for="technicalSales">ÊäÄË°ìÂ£≤‰∏ä (ÂÜÜ)</label>
                        <input type="number" id="technicalSales" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label for="retailSales">Áâ©Ë≤©Â£≤‰∏ä (ÂÜÜ)</label>
                        <input type="number" id="retailSales" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label for="customerCount">Êù•ÂÆ¢Êï∞ (‰∫∫)</label>
                        <input type="number" id="customerCount" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="instagramUpdate" style="width: auto;">
                            InstagramÊõ¥Êñ∞Ê∏à„Åø
                        </label>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="tiktokUpdate" style="width: auto;">
                            TikTokÊõ¥Êñ∞Ê∏à„Åø
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="memo">„É°„É¢</label>
                        <textarea id="memo" rows="3" placeholder="‰ªäÊó•„ÅÆÊåØ„ÇäËøî„Çä„ÇÑÊ∞ó„Å•„Åç„ÇíË®òÂÖ•..."></textarea>
                    </div>
                    <button class="btn" onclick="saveDailyReport()">Êó•Â†±„Çí‰øùÂ≠ò</button>
                </div>
            </div>
            
            <!-- ÊúàÊ¨°„Çµ„Éû„É™„Éº„Çø„Éñ -->
            <div id="monthlySummaryTab" class="tab-content hidden">
                <div class="summary-card">
                    <h3 style="color: #ff69b4; margin-bottom: 15px;">üìä ÊúàÊ¨°„Çµ„Éû„É™„Éº</h3>
                    <div class="form-group">
                        <label for="summaryMonth">ÂØæË±°Êúà</label>
                        <input type="month" id="summaryMonth" onchange="loadMonthlySummary()">
                    </div>
                    <div id="summaryContent">
                        <p style="text-align: center; color: #888; padding: 40px;">Êúà„ÇíÈÅ∏Êäû„Åó„Å¶„Çµ„Éû„É™„Éº„ÇíË°®Á§∫</p>
                    </div>
                </div>
            </div>

            <button class="btn logout" onclick="logout()">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
        </div>

        <!-- ÁÆ°ÁêÜËÄÖ„É°„Ç§„É≥ÁîªÈù¢ -->
        <div id="adminMain" class="main-content hidden">
            <div class="header">
                <h1>ÁÆ°ÁêÜËÄÖÁîªÈù¢</h1>
                <p>„Ç∑„Çπ„ÉÜ„É†ÁÆ°ÁêÜ</p>
            </div>
            
            <div class="tabs">
                <button class="tab active" onclick="showAdminTab('allEmployees')">ÂÖ®Á§æÂì°„Éá„Éº„Çø</button>
                <button class="tab" onclick="showAdminTab('newEmployee')">Êñ∞Ë¶èÁôªÈå≤</button>
                <button class="tab" onclick="showAdminTab('settings')">Ë®≠ÂÆö</button>
            </div>

            <!-- ÂÖ®Á§æÂì°„Éá„Éº„Çø„Çø„Éñ -->
            <div id="allEmployeesTab" class="tab-content">
                <div class="summary-card">
                    <h3 style="color: #ff69b4; margin-bottom: 15px;">üë• ÂÖ®Á§æÂì°„Éá„Éº„Çø</h3>
                    <div id="allEmployeesContent">
                        „Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø‰∏≠...
                    </div>
                </div>
            </div>

            <!-- Êñ∞Ë¶èÁ§æÂì°ÁôªÈå≤„Çø„Éñ -->
            <div id="newEmployeeTab" class="tab-content hidden">
                <div class="summary-card">
                    <h3 style="color: #ff69b4; margin-bottom: 15px;">‚ûï Êñ∞Ë¶èÁ§æÂì°ÁôªÈå≤</h3>
                    <div class="form-group">
                        <label for="newEmployeeName">Á§æÂì°Âêç</label>
                        <input type="text" id="newEmployeeName" placeholder="Á§æÂì°Âêç„ÇíÂÖ•Âäõ">
                    </div>
                    <div class="form-group">
                        <div class="password-container">
                            <label for="newEmployeePassword">„Éë„Çπ„ÉØ„Éº„Éâ</label>
                            <input type="password" id="newEmployeePassword" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ">
                            <button type="button" class="password-toggle" onclick="togglePassword('newEmployeePassword')">üëÅÔ∏è</button>
                        </div>
                    </div>
                    <button class="btn" onclick="registerNewEmployee()">Á§æÂì°„ÇíÁôªÈå≤</button>
                </div>
            </div>

            <!-- Ë®≠ÂÆö„Çø„Éñ -->
            <div id="settingsTab" class="tab-content hidden">
                <div class="summary-card">
                    <h3 style="color: #ff69b4; margin-bottom: 15px;">‚öôÔ∏è „Ç∑„Çπ„ÉÜ„É†Ë®≠ÂÆö</h3>
                    <div class="form-group">
                        <button class="btn success" onclick="exportData()">üì§ „Éá„Éº„Çø„Ç®„ÇØ„Çπ„Éù„Éº„Éà</button>
                    </div>
                    <div class="form-group">
                        <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData()">
                        <button class="btn success" onclick="document.getElementById('importFile').click()">üì• „Éá„Éº„Çø„Ç§„É≥„Éù„Éº„Éà</button>
                    </div>
                    <div class="form-group">
                        <button class="btn secondary" onclick="clearAllData()">üóëÔ∏è ÂÖ®„Éá„Éº„Çø„ÇØ„É™„Ç¢</button>
                    </div>
                    <div class="info-text">
                        ÂÆöÊúüÁöÑ„Å´„Éá„Éº„Çø„Çí„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Åó„Å¶„Åè„Å†„Åï„ÅÑ
                    </div>
                </div>
            </div>
            
            <button class="btn logout" onclick="logout()">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
        </div>
    </div>

    <!-- Áä∂ÊÖãË°®Á§∫ -->
    <div class="status-indicator">üì± „É≠„Éº„Ç´„É´‰øùÂ≠ò„É¢„Éº„Éâ</div>

    <script>
        // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞
        let currentUser = '';
        let isAdmin = false;

        // Á§æÂì°„Éá„Éº„ÇøÁÆ°ÁêÜ
        function getEmployees() {
            const employees = localStorage.getItem('employees');
            return employees ? JSON.parse(employees) : [];
        }

        function saveEmployees(employees) {
            localStorage.setItem('employees', JSON.stringify(employees));
        }

        // „Éë„Çπ„ÉØ„Éº„ÉâË°®Á§∫Âàá„ÇäÊõø„Åà
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const button = input.parentElement.querySelector('.password-toggle');
            
            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = 'üôà';
            } else {
                input.type = 'password';
                button.textContent = 'üëÅÔ∏è';
            }
        }

        // ÊàêÂäü„É°„ÉÉ„Çª„Éº„Ç∏Ë°®Á§∫
        function showSuccess(message) {
            const notification = document.createElement('div');
            notification.className = 'success-message';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.remove(), 3000);
        }

        // Á§æÂì°„É≠„Ç∞„Ç§„É≥
        function employeeLogin() {
            const name = document.getElementById('loginName').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            if (!name || !password) {
                alert('ÂêçÂâç„Å®„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            const employees = getEmployees();
            const employee = employees.find(emp => emp.name === name && emp.password === password);
            
            if (employee) {
                currentUser = name;
                isAdmin = false;
                showScreen('employeeMain');
                document.getElementById('employeeWelcome').textContent = `„Åì„Çì„Å´„Å°„ÅØ„ÄÅ${name}„Åï„ÇìÔºÅ`;
                loadDailyReport();
                showSuccess('„É≠„Ç∞„Ç§„É≥„Åó„Åæ„Åó„ÅüÔºÅ');
            } else {
                alert('ÂêçÂâç„Åæ„Åü„ÅØ„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÈñìÈÅï„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ');
            }
        }

        // ÁÆ°ÁêÜËÄÖ„É≠„Ç∞„Ç§„É≥
        function adminLogin() {
            const password = document.getElementById('loginPassword').value;
            
            if (password === 'admin123') {
                currentUser = 'admin';
                isAdmin = true;
                showScreen('adminMain');
                loadAllEmployeeData();
                showSuccess('ÁÆ°ÁêÜËÄÖ„Å®„Åó„Å¶„É≠„Ç∞„Ç§„É≥„Åó„Åæ„Åó„ÅüÔºÅ');
            } else {
                alert('ÁÆ°ÁêÜËÄÖ„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÈñìÈÅï„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ');
            }
        }

        // ÁîªÈù¢Âàá„ÇäÊõø„Åà
        function showScreen(screenId) {
            const screens = ['loginScreen', 'employeeMain', 'adminMain'];
            screens.forEach(screen => {
                document.getElementById(screen).classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
            
            if (screenId === 'loginScreen') {
                document.getElementById('loginName').value = '';
                document.getElementById('loginPassword').value = '';
            }
        }

        // „Çø„ÉñÂàá„ÇäÊõø„ÅàÔºàÁ§æÂì°ÁîªÈù¢Ôºâ
        function showTab(tabName) {
            const tabs = document.querySelectorAll('#employeeMain .tab');
            const contents = document.querySelectorAll('#employeeMain .tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.add('hidden'));
            
            event.target.classList.add('active');
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
            
            if (tabName === 'monthlySummary') {
                const currentMonth = new Date().toISOString().substr(0, 7);
                document.getElementById('summaryMonth').value = currentMonth;
                loadMonthlySummary();
            }
        }

        // „Çø„ÉñÂàá„ÇäÊõø„ÅàÔºàÁÆ°ÁêÜËÄÖÁîªÈù¢Ôºâ
        function showAdminTab(tabName) {
            const tabs = document.querySelectorAll('#adminMain .tab');
            const contents = document.querySelectorAll('#adminMain .tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.add('hidden'));
            
            event.target.classList.add('active');
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
        }

        // Êó•Â†±‰øùÂ≠ò
        function saveDailyReport() {
            const report = {
                employeeName: currentUser,
                sales: parseInt(document.getElementById('totalSales').value) || 0,
                technicalSales: parseInt(document.getElementById('technicalSales').value) || 0,
                retailSales: parseInt(document.getElementById('retailSales').value) || 0,
                customerCount: parseInt(document.getElementById('customerCount').value) || 0,
                instagramUpdated: document.getElementById('instagramUpdate').checked,
                tiktokUpdated: document.getElementById('tiktokUpdate').checked,
                memo: document.getElementById('memo').value,
                timestamp: new Date().toISOString()
            };
            
            const today = new Date().toISOString().split('T')[0];
            let dailyReports = JSON.parse(localStorage.getItem('dailyReports') || '{}');
            
            dailyReports[today] = report;
            localStorage.setItem('dailyReports', JSON.stringify(dailyReports));
            
            showSuccess('Êó•Â†±„Åå‰øùÂ≠ò„Åï„Çå„Åæ„Åó„ÅüÔºÅ');
        }

        // Êó•Â†±„Éá„Éº„ÇøË™≠„ÅøËæº„Åø
        function loadDailyReport() {
            const today = new Date().toISOString().split('T')[0];
            const dailyReports = JSON.parse(localStorage.getItem('dailyReports') || '{}');
            const todayReport = dailyReports[today];
            
            if (todayReport && todayReport.employeeName === currentUser) {
                document.getElementById('totalSales').value = todayReport.sales || '';
                document.getElementById('technicalSales').value = todayReport.technicalSales || '';
                document.getElementById('retailSales').value = todayReport.retailSales || '';
                document.getElementById('customerCount').value = todayReport.customerCount || '';
                document.getElementById('instagramUpdate').checked = todayReport.instagramUpdated || false;
                document.getElementById('tiktokUpdate').checked = todayReport.tiktokUpdated || false;
                document.getElementById('memo').value = todayReport.memo || '';
            }
        }

        // ÊúàÊ¨°„Çµ„Éû„É™„ÉºË™≠„ÅøËæº„Åø
        function loadMonthlySummary() {
            const selectedMonth = document.getElementById('summaryMonth').value;
            const dailyReports = JSON.parse(localStorage.getItem('dailyReports') || '{}');
            
            const monthlyData = {
                totalSales: 0,
                technicalSales: 0,
                retailSales: 0,
                customerCount: 0,
                workDays: 0,
                instagramDays: 0,
                tiktokDays: 0
            };
            
            Object.entries(dailyReports).forEach(([date, report]) => {
                if (date.startsWith(selectedMonth) && report.employeeName === currentUser) {
                    monthlyData.totalSales += report.sales || 0;
                    monthlyData.technicalSales += report.technicalSales || 0;
                    monthlyData.retailSales += report.retailSales || 0;
                    monthlyData.customerCount += report.customerCount || 0;
                    monthlyData.workDays++;
                    if (report.instagramUpdated) monthlyData.instagramDays++;
                    if (report.tiktokUpdated) monthlyData.tiktokDays++;
                }
            });
            
            const summaryContent = document.getElementById('summaryContent');
            if (monthlyData.workDays === 0) {
                summaryContent.innerHTML = '<p style="text-align: center; color: #888; padding: 40px;">„Åì„ÅÆÊúà„ÅÆ„Éá„Éº„Çø„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì</p>';
                return;
            }
            
            summaryContent.innerHTML = `
                <div class="data-grid">
                    <div class="data-item total">
                        <div class="data-label">Á∑èÂ£≤‰∏ä</div>
                        <div class="data-value">${monthlyData.totalSales.toLocaleString()}ÂÜÜ</div>
                    </div>
                    <div class="data-item technical">
                        <div class="data-label">ÊäÄË°ìÂ£≤‰∏ä</div>
                        <div class="data-value">${monthlyData.technicalSales.toLocaleString()}ÂÜÜ</div>
                    </div>
                    <div class="data-item retail">
                        <div class="data-label">Áâ©Ë≤©Â£≤‰∏ä</div>
                        <div class="data-value">${monthlyData.retailSales.toLocaleString()}ÂÜÜ</div>
                    </div>
                    <div class="data-item customer">
                        <div class="data-label">Êù•ÂÆ¢Êï∞</div>
                        <div class="data-value">${monthlyData.customerCount}‰∫∫</div>
                    </div>
                </div>
                <div style="background: rgba(255, 240, 250, 0.5); padding: 15px; border-radius: 8px;">
                    <div style="margin-bottom: 8px;"><strong>Á®ºÂÉçÊó•Êï∞:</strong> ${monthlyData.workDays}Êó•</div>
                    <div style="margin-bottom: 8px;"><strong>InstagramÊõ¥Êñ∞:</strong> ${monthlyData.instagramDays}Êó•</div>
                    <div><strong>TikTokÊõ¥Êñ∞:</strong> ${monthlyData.tiktokDays}Êó•</div>
                </div>
            `;
        }

        // ÂÖ®Á§æÂì°„Éá„Éº„ÇøË™≠„ÅøËæº„Åø
        function loadAllEmployeeData() {
            const employees = getEmployees();
            const dailyReports = JSON.parse(localStorage.getItem('dailyReports') || '{}');
            const content = document.getElementById('allEmployeesContent');
            
            if (employees.length === 0) {
                content.innerHTML = '<p style="text-align: center; color: #888;">ÁôªÈå≤„Åï„Çå„ÅüÁ§æÂì°„ÅØ„ÅÑ„Åæ„Åõ„Çì</p>';
                return;
            }
            
            let html = `<div style="margin-bottom: 20px;"><h4 style="color: #ff69b4; margin-bottom: 15px;">ÁôªÈå≤Á§æÂì°‰∏ÄË¶ß (${employees.length}Âêç)</h4>`;
            
            employees.forEach(emp => {
                const reportCount = Object.keys(dailyReports).filter(date => 
                    dailyReports[date].employeeName === emp.name
                ).length;
                
                html += `
                    <div class="employee-list">
                        <div>
                            <strong>${emp.name}</strong>
                            <div style="font-size: 12px; color: #666;">Êó•Â†±ÊèêÂá∫: ${reportCount}Âõû</div>
                        </div>
                        <div style="font-size: 12px; color: #888;">
                            ÁôªÈå≤: ${new Date(emp.registeredAt).toLocaleDateString()}
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            content.innerHTML = html;
        }

        // Êñ∞Ë¶èÁ§æÂì°ÁôªÈå≤
        function registerNewEmployee() {
            const name = document.getElementById('newEmployeeName').value.trim();
            const password = document.getElementById('newEmployeePassword').value;
            
            if (!name || !password) {
                alert('Á§æÂì°Âêç„Å®„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            const employees = getEmployees();
            if (employees.find(emp => emp.name === name)) {
                alert('Âêå„ÅòÂêçÂâç„ÅÆÁ§æÂì°„ÅåÊó¢„Å´ÁôªÈå≤„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ');
                return;
            }
            
            const newEmployee = {
                name: name,
                password: password,
                registeredAt: new Date().toISOString()
            };
            
            employees.push(newEmployee);
            saveEmployees(employees);
            
            document.getElementById('newEmployeeName').value = '';
            document.getElementById('newEmployeePassword').value = '';
            
            showSuccess(`${name}„Åï„Çì„ÅåÁôªÈå≤„Åï„Çå„Åæ„Åó„ÅüÔºÅ`);
            loadAllEmployeeData();
        }

        // „Éá„Éº„Çø„Ç®„ÇØ„Çπ„Éù„Éº„Éà
        function exportData() {
            const data = {
                employees: JSON.parse(localStorage.getItem('employees') || '[]'),
                dailyReports: JSON.parse(localStorage.getItem('dailyReports') || '{}'),
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `eyelash-salon-data-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccess('„Éá„Éº„Çø„Çí„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Åó„Åæ„Åó„ÅüÔºÅ');
        }

        // „Éá„Éº„Çø„Ç§„É≥„Éù„Éº„Éà
        function importData() {
            const file = document.getElementById('importFile').files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.employees) localStorage.setItem('employees', JSON.stringify(data.employees));
                    if (data.dailyReports) localStorage.setItem('dailyReports', JSON.stringify(data.dailyReports));
                    
                    showSuccess('„Éá„Éº„Çø„Çí„Ç§„É≥„Éù„Éº„Éà„Åó„Åæ„Åó„ÅüÔºÅ');
                    loadAllEmployeeData();
                } catch (error) {
                    alert('„Éï„Ç°„Ç§„É´„ÅÆÂΩ¢Âºè„ÅåÊ≠£„Åó„Åè„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ');
                }
            };
            reader.readAsText(file);
        }

        // ÂÖ®„Éá„Éº„Çø„ÇØ„É™„Ç¢
        function clearAllData() {
            if (confirm('Êú¨ÂΩì„Å´ÂÖ®„Å¶„ÅÆ„Éá„Éº„Çø„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü„Åì„ÅÆÊìç‰Ωú„ÅØÂèñ„ÇäÊ∂à„Åõ„Åæ„Åõ„Çì„ÄÇ')) {
                localStorage.removeItem('employees');
                localStorage.removeItem('dailyReports');
                showSuccess('ÂÖ®„Éá„Éº„Çø„Çí„ÇØ„É™„Ç¢„Åó„Åæ„Åó„Åü');
                loadAllEmployeeData();
            }
        }

        // „É≠„Ç∞„Ç¢„Ç¶„Éà
        function logout() {
            currentUser = '';
            isAdmin = false;
            showScreen('loginScreen');
            showSuccess('„É≠„Ç∞„Ç¢„Ç¶„Éà„Åó„Åæ„Åó„Åü');
        }

        // ÂàùÊúüÂåñ
        window.addEventListener('load', function() {
            // ÁèæÂú®„ÅÆÊúà„Çí„Éá„Éï„Ç©„É´„Éà„Å´Ë®≠ÂÆö
            const currentMonth = new Date().toISOString().substr(0, 7);
            const summaryMonth = document.getElementById('summaryMonth');
            if (summaryMonth) {
                summaryMonth.value = currentMonth;
            }
            
            console.log('‚úÖ „Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÂÆå‰∫Ü - ÂÆåÂÖ®Âãï‰Ωú‰øùË®ºÁâà v2');
        });
    </script>
</body>
</html>
