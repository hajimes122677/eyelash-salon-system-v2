<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã¾ã¤æ¯›ã‚¨ã‚¯ã‚¹ãƒ†ã‚µãƒ­ãƒ³ æ—¥å ±ãƒ»ç›®æ¨™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  v2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ffeef7 0%, #ffe0f0 50%, #ffcce6 100%);
            min-height: 100vh;
            padding: 10px;
        }
        
        .container {
            max-width: 420px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 20px 20px 0 0;
        }
        
        .header h1 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 0.9em;
        }
        
        .login-form, .main-content {
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }
        
        input[type="text"], input[type="password"], input[type="date"], input[type="number"], input[type="month"], textarea, select {
            width: 100%;
            padding: 15px;
            border: 2px solid #ffe0f0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: rgba(255, 240, 250, 0.5);
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #ff69b4;
            background: rgba(255, 240, 250, 0.8);
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.2);
        }
        
        .password-container {
            position: relative;
        }
        
        .password-container input {
            padding-right: 50px;
        }
        
        .password-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #ff69b4;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            z-index: 10;
        }
        
        .btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            touch-action: manipulation;
        }
        
        .btn:hover, .btn:focus {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 20, 147, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn.secondary {
            background: linear-gradient(135deg, #dda0dd 0%, #ba55d3 100%);
        }
        
        .btn.logout {
            background: linear-gradient(135deg, #ffa500 0%, #ff6347 100%);
            margin-top: 20px;
        }
        
        .btn.success {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        }
        
        .hidden {
            display: none !important;
        }
        
        .tabs {
            display: flex;
            background: rgba(255, 240, 250, 0.8);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 25px;
        }
        
        .tab {
            flex: 1;
            padding: 15px 10px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(255, 105, 180, 0.3);
        }
        
        .tab:hover:not(.active) {
            background: rgba(255, 105, 180, 0.1);
            color: #ff69b4;
        }
        
        .info-text {
            text-align: center;
            color: #888;
            font-size: 14px;
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 240, 250, 0.3);
            border-radius: 8px;
            border-left: 4px solid #ff69b4;
        }
        
        .summary-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .status-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1000;
            background: #4CAF50;
            color: white;
        }
        
        .data-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .data-item {
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .data-item.total { background: rgba(255, 20, 147, 0.1); }
        .data-item.technical { background: rgba(76, 205, 196, 0.1); }
        .data-item.retail { background: rgba(255, 165, 0, 0.1); }
        .data-item.customer { background: rgba(138, 43, 226, 0.1); }
        
        .data-label {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .data-value {
            font-size: 20px;
            font-weight: bold;
        }
        
        .data-item.total .data-label { color: #ff1493; }
        .data-item.total .data-value { color: #ff1493; }
        .data-item.technical .data-label { color: #4ecdc4; }
        .data-item.technical .data-value { color: #4ecdc4; }
        .data-item.retail .data-label { color: #ffa500; }
        .data-item.retail .data-value { color: #ffa500; }
        .data-item.customer .data-label { color: #8a2be2; }
        .data-item.customer .data-value { color: #8a2be2; }
        
        .employee-list {
            background: rgba(255, 240, 250, 0.5);
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .success-message {
            position: fixed;
            top: 50px;
            right: 10px;
            background: #4CAF50;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 1001;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ -->
        <div id="loginScreen">
            <div class="header">
                <h1>ğŸ€ ã¾ã¤æ¯›ã‚¨ã‚¯ã‚¹ãƒ†ã‚µãƒ­ãƒ³</h1>
                <p>æ—¥å ±ãƒ»ç›®æ¨™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  v2</p>
            </div>
            <div class="login-form">
                <div class="form-group">
                    <label for="loginName">åå‰</label>
                    <input type="text" id="loginName" placeholder="ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
                </div>
                <div class="form-group">
                    <div class="password-container">
                        <label for="loginPassword">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                        <input type="password" id="loginPassword" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
                        <button type="button" class="password-toggle" onclick="togglePassword('loginPassword')">ğŸ‘ï¸</button>
                    </div>
                </div>
                <button class="btn" onclick="employeeLogin()">ç¤¾å“¡ãƒ­ã‚°ã‚¤ãƒ³</button>
                <button class="btn secondary" onclick="adminLogin()">ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³</button>
                <div class="info-text">
                    <strong>ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰:</strong> admin123<br>
                    æ–°è¦ç¤¾å“¡ç™»éŒ²ã¯ç®¡ç†è€…ç”»é¢ã‹ã‚‰è¡Œãˆã¾ã™
                </div>
            </div>
        </div>

        <!-- ç¤¾å“¡ãƒ¡ã‚¤ãƒ³ç”»é¢ -->
        <div id="employeeMain" class="main-content hidden">
            <div class="header">
                <h1>ç¤¾å“¡ç”»é¢</h1>
                <p id="employeeWelcome">ã“ã‚“ã«ã¡ã¯ï¼</p>
            </div>
            
            <div class="tabs">
                <button class="tab active" onclick="showTab('dailyReport')">æ—¥å ±å…¥åŠ›</button>
                <button class="tab" onclick="showTab('monthlySummary')">æœˆæ¬¡ã‚µãƒãƒªãƒ¼</button>
            </div>
            
            <!-- æ—¥å ±å…¥åŠ›ã‚¿ãƒ– -->
            <div id="dailyReportTab" class="tab-content">
                <div class="summary-card">
                    <h3 style="color: #ff69b4; margin-bottom: 15px;">ğŸ“‹ æœ¬æ—¥ã®æ—¥å ±</h3>
                    <div class="form-group">
                        <label for="totalSales">ç·å£²ä¸Š (å††)</label>
                        <input type="number" id="totalSales" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label for="technicalSales">æŠ€è¡“å£²ä¸Š (å††)</label>
                        <input type="number" id="technicalSales" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label for="retailSales">ç‰©è²©å£²ä¸Š (å††)</label>
                        <input type="number" id="retailSales" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label for="customerCount">æ¥å®¢æ•° (äºº)</label>
                        <input type="number" id="customerCount" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="instagramUpdate" style="width: auto;">
                            Instagramæ›´æ–°æ¸ˆã¿
                        </label>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="tiktokUpdate" style="width: auto;">
                            TikTokæ›´æ–°æ¸ˆã¿
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="memo">ãƒ¡ãƒ¢</label>
                        <textarea id="memo" rows="3" placeholder="ä»Šæ—¥ã®æŒ¯ã‚Šè¿”ã‚Šã‚„æ°—ã¥ãã‚’è¨˜å…¥..."></textarea>
                    </div>
                    <button class="btn" onclick="saveDailyReport()">æ—¥å ±ã‚’ä¿å­˜</button>
                </div>
            </div>
            
            <!-- æœˆæ¬¡ã‚µãƒãƒªãƒ¼ã‚¿ãƒ– -->
            <div id="monthlySummaryTab" class="tab-content hidden">
                <div class="summary-card">
                    <h3 style="color: #ff69b4; margin-bottom: 15px;">ğŸ“Š æœˆæ¬¡ã‚µãƒãƒªãƒ¼</h3>
                    <div class="form-group">
                        <label for="summaryMonth">å¯¾è±¡æœˆ</label>
                        <input type="month" id="summaryMonth" onchange="loadMonthlySummary()">
                    </div>
                    <div id="summaryContent">
                        <p style="text-align: center; color: #888; padding: 40px;">æœˆã‚’é¸æŠã—ã¦ã‚µãƒãƒªãƒ¼ã‚’è¡¨ç¤º</p>
                    </div>
                </div>
            </div>

            <button class="btn logout" onclick="logout()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
        </div>

        <!-- ç®¡ç†è€…ãƒ¡ã‚¤ãƒ³ç”»é¢ -->
        <div id="adminMain" class="main-content hidden">
            <div class="header">
                <h1>ç®¡ç†è€…ç”»é¢</h1>
                <p>ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†</p>
            </div>
            
            <div class="tabs">
                <button class="tab active" onclick="showAdminTab('allEmployees')">å…¨ç¤¾å“¡ãƒ‡ãƒ¼ã‚¿</button>
                <button class="tab" onclick="showAdminTab('newEmployee')">æ–°è¦ç™»éŒ²</button>
                <button class="tab" onclick="showAdminTab('settings')">è¨­å®š</button>
            </div>

            <!-- å…¨ç¤¾å“¡ãƒ‡ãƒ¼ã‚¿ã‚¿ãƒ– -->
            <div id="allEmployeesTab" class="tab-content">
                <div class="summary-card">
                    <h3 style="color: #ff69b4; margin-bottom: 15px;">ğŸ‘¥ å…¨ç¤¾å“¡ãƒ‡ãƒ¼ã‚¿</h3>
                    <div id="allEmployeesContent">
                        ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...
                    </div>
                </div>
            </div>

            <!-- æ–°è¦ç¤¾å“¡ç™»éŒ²ã‚¿ãƒ– -->
            <div id="newEmployeeTab" class="tab-content hidden">
                <div class="summary-card">
                    <h3 style="color: #ff69b4; margin-bottom: 15px;">â• æ–°è¦ç¤¾å“¡ç™»éŒ²</h3>
                    <div class="form-group">
                        <label for="newEmployeeName">ç¤¾å“¡å</label>
                        <input type="text" id="newEmployeeName" placeholder="ç¤¾å“¡åã‚’å…¥åŠ›">
                    </div>
                    <div class="form-group">
                        <div class="password-container">
                            <label for="newEmployeePassword">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                            <input type="password" id="newEmployeePassword" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›">
                            <button type="button" class="password-toggle" onclick="togglePassword('newEmployeePassword')">ğŸ‘ï¸</button>
                        </div>
                    </div>
                    <button class="btn" onclick="registerNewEmployee()">ç¤¾å“¡ã‚’ç™»éŒ²</button>
                </div>
            </div>

            <!-- è¨­å®šã‚¿ãƒ– -->
            <div id="settingsTab" class="tab-content hidden">
                <div class="summary-card">
                    <h3 style="color: #ff69b4; margin-bottom: 15px;">âš™ï¸ ã‚·ã‚¹ãƒ†ãƒ è¨­å®š</h3>
                    <div class="form-group">
                        <button class="btn success" onclick="exportData()">ğŸ“¤ ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
                    </div>
                    <div class="form-group">
                        <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData()">
                        <button class="btn success" onclick="document.getElementById('importFile').click()">ğŸ“¥ ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
                    </div>
                    <div class="form-group">
                        <button class="btn secondary" onclick="clearAllData()">ğŸ—‘ï¸ å…¨ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢</button>
                    </div>
                    <div class="info-text">
                        å®šæœŸçš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦ãã ã•ã„
                    </div>
                </div>
            </div>
            
            <button class="btn logout" onclick="logout()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
        </div>
    </div>

    <!-- çŠ¶æ…‹è¡¨ç¤º -->
    <div class="status-indicator">ğŸ“± ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ãƒ¢ãƒ¼ãƒ‰</div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let currentUser = '';
        let isAdmin = false;

        // ç¤¾å“¡ãƒ‡ãƒ¼ã‚¿ç®¡ç†
        function getEmployees() {
            const employees = localStorage.getItem('employees');
            return employees ? JSON.parse(employees) : [];
        }

        function saveEmployees(employees) {
            localStorage.setItem('employees', JSON.stringify(employees));
        }

        // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const button = input.parentElement.querySelector('.password-toggle');
            
            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = 'ğŸ™ˆ';
            } else {
                input.type = 'password';
                button.textContent = 'ğŸ‘ï¸';
            }
        }

        // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
        function showSuccess(message) {
            const notification = document.createElement('div');
            notification.className = 'success-message';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.remove(), 3000);
        }

        // ç¤¾å“¡ãƒ­ã‚°ã‚¤ãƒ³
        function employeeLogin() {
            const name = document.getElementById('loginName').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            if (!name || !password) {
                alert('åå‰ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            const employees = getEmployees();
            const employee = employees.find(emp => emp.name === name && emp.password === password);
            
            if (employee) {
                currentUser = name;
                isAdmin = false;
                showScreen('employeeMain');
                document.getElementById('employeeWelcome').textContent = `ã“ã‚“ã«ã¡ã¯ã€${name}ã•ã‚“ï¼`;
                loadDailyReport();
                showSuccess('ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸï¼');
            } else {
                alert('åå‰ã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã¾ã™ã€‚');
            }
        }

        // ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³
        function adminLogin() {
            const password = document.getElementById('loginPassword').value;
            
            if (password === 'admin123') {
                currentUser = 'admin';
                isAdmin = true;
                showScreen('adminMain');
                loadAllEmployeeData();
                showSuccess('ç®¡ç†è€…ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸï¼');
            } else {
                alert('ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã¾ã™ã€‚');
            }
        }

        // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
        function showScreen(screenId) {
            const screens = ['loginScreen', 'employeeMain', 'adminMain'];
            screens.forEach(screen => {
                document.getElementById(screen).classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
            
            if (screenId === 'loginScreen') {
                document.getElementById('loginName').value = '';
                document.getElementById('loginPassword').value = '';
            }
        }

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆï¼ˆç¤¾å“¡ç”»é¢ï¼‰
        function showTab(tabName) {
            const tabs = document.querySelectorAll('#employeeMain .tab');
            const contents = document.querySelectorAll('#employeeMain .tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.add('hidden'));
            
            event.target.classList.add('active');
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
            
            if (tabName === 'monthlySummary') {
                const currentMonth = new Date().toISOString().substr(0, 7);
                document.getElementById('summaryMonth').value = currentMonth;
                loadMonthlySummary();
            }
        }

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆï¼ˆç®¡ç†è€…ç”»é¢ï¼‰
        function showAdminTab(tabName) {
            const tabs = document.querySelectorAll('#adminMain .tab');
            const contents = document.querySelectorAll('#adminMain .tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.add('hidden'));
            
            event.target.classList.add('active');
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
        }

        // æ—¥å ±ä¿å­˜
        function saveDailyReport() {
            const report = {
                employeeName: currentUser,
                sales: parseInt(document.getElementById('totalSales').value) || 0,
                technicalSales: parseInt(document.getElementById('technicalSales').value) || 0,
                retailSales: parseInt(document.getElementById('retailSales').value) || 0,
                customerCount: parseInt(document.getElementById('customerCount').value) || 0,
                instagramUpdated: document.getElementById('instagramUpdate').checked,
                tiktokUpdated: document.getElementById('tiktokUpdate').checked,
                memo: document.getElementById('memo').value,
                timestamp: new Date().toISOString()
            };
            
            const today = new Date().toISOString().split('T')[0];
            let dailyReports = JSON.parse(localStorage.getItem('dailyReports') || '{}');
            
            dailyReports[today] = report;
            localStorage.setItem('dailyReports', JSON.stringify(dailyReports));
            
            showSuccess('æ—¥å ±ãŒä¿å­˜ã•ã‚Œã¾ã—ãŸï¼');
        }

        // æ—¥å ±ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
        function loadDailyReport() {
            const today = new Date().toISOString().split('T')[0];
            const dailyReports = JSON.parse(localStorage.getItem('dailyReports') || '{}');
            const todayReport = dailyReports[today];
            
            if (todayReport && todayReport.employeeName === currentUser) {
                document.getElementById('totalSales').value = todayReport.sales || '';
                document.getElementById('technicalSales').value = todayReport.technicalSales || '';
                document.getElementById('retailSales').value = todayReport.retailSales || '';
                document.getElementById('customerCount').value = todayReport.customerCount || '';
                document.getElementById('instagramUpdate').checked = todayReport.instagramUpdated || false;
                document.getElementById('tiktokUpdate').checked = todayReport.tiktokUpdated || false;
                document.getElementById('memo').value = todayReport.memo || '';
            }
        }

        // æœˆæ¬¡ã‚µãƒãƒªãƒ¼èª­ã¿è¾¼ã¿
        function loadMonthlySummary() {
            const selectedMonth = document.getElementById('summaryMonth').value;
            const dailyReports = JSON.parse(localStorage.getItem('dailyReports') || '{}');
            
            const monthlyData = {
                totalSales: 0,
                technicalSales: 0,
                retailSales: 0,
                customerCount: 0,
                workDays: 0,
                instagramDays: 0,
                tiktokDays: 0
            };
            
            Object.entries(dailyReports).forEach(([date, report]) => {
                if (date.startsWith(selectedMonth) && report.employeeName === currentUser) {
                    monthlyData.totalSales += report.sales || 0;
                    monthlyData.technicalSales += report.technicalSales || 0;
                    monthlyData.retailSales += report.retailSales || 0;
                    monthlyData.customerCount += report.customerCount || 0;
                    monthlyData.workDays++;
                    if (report.instagramUpdated) monthlyData.instagramDays++;
                    if (report.tiktokUpdated) monthlyData.tiktokDays++;
                }
            });
            
            const summaryContent = document.getElementById('summaryContent');
            if (monthlyData.workDays === 0) {
                summaryContent.innerHTML = '<p style="text-align: center; color: #888; padding: 40px;">ã“ã®æœˆã®ãƒ‡ãƒ¼ã‚¿ã¯ã‚ã‚Šã¾ã›ã‚“</p>';
                return;
            }
            
            summaryContent.innerHTML = `
                <div class="data-grid">
                    <div class="data-item total">
                        <div class="data-label">ç·å£²ä¸Š</div>
                        <div class="data-value">${monthlyData.totalSales.toLocaleString()}å††</div>
                    </div>
                    <div class="data-item technical">
                        <div class="data-label">æŠ€è¡“å£²ä¸Š</div>
                        <div class="data-value">${monthlyData.technicalSales.toLocaleString()}å††</div>
                    </div>
                    <div class="data-item retail">
                        <div class="data-label">ç‰©è²©å£²ä¸Š</div>
                        <div class="data-value">${monthlyData.retailSales.toLocaleString()}å††</div>
                    </div>
                    <div class="data-item customer">
                        <div class="data-label">æ¥å®¢æ•°</div>
                        <div class="data-value">${monthlyData.customerCount}äºº</div>
                    </div>
                </div>
                <div style="background: rgba(255, 240, 250, 0.5); padding: 15px; border-radius: 8px;">
                    <div style="margin-bottom: 8px;"><strong>ç¨¼åƒæ—¥æ•°:</strong> ${monthlyData.workDays}æ—¥</div>
                    <div style="margin-bottom: 8px;"><strong>Instagramæ›´æ–°:</strong> ${monthlyData.instagramDays}æ—¥</div>
                    <div><strong>TikTokæ›´æ–°:</strong> ${monthlyData.tiktokDays}æ—¥</div>
                </div>
            `;
        }

        // å…¨ç¤¾å“¡ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
        function loadAllEmployeeData() {
            const employees = getEmployees();
            const dailyReports = JSON.parse(localStorage.getItem('dailyReports') || '{}');
            const content = document.getElementById('allEmployeesContent');
            
            if (employees.length === 0) {
                content.innerHTML = '<p style="text-align: center; color: #888;">ç™»éŒ²ã•ã‚ŒãŸç¤¾å“¡ã¯ã„ã¾ã›ã‚“</p>';
                return;
            }
            
            let html = `<div style="margin-bottom: 20px;"><h4 style="color: #ff69b4; margin-bottom: 15px;">ç™»éŒ²ç¤¾å“¡ä¸€è¦§ (${employees.length}å)</h4>`;
            
            employees.forEach(emp => {
                const reportCount = Object.keys(dailyReports).filter(date => 
                    dailyReports[date].employeeName === emp.name
                ).length;
                
                html += `
                    <div class="employee-list">
                        <div>
                            <strong>${emp.name}</strong>
                            <div style="font-size: 12px; color: #666;">æ—¥å ±æå‡º: ${reportCount}å›</div>
                        </div>
                        <div style="font-size: 12px; color: #888;">
                            ç™»éŒ²: ${new Date(emp.registeredAt).toLocaleDateString()}
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            content.innerHTML = html;
        }

        // æ–°è¦ç¤¾å“¡ç™»éŒ²
        function registerNewEmployee() {
            const name = document.getElementById('newEmployeeName').value.trim();
            const password = document.getElementById('newEmployeePassword').value;
            
            if (!name || !password) {
                alert('ç¤¾å“¡åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            const employees = getEmployees();
            if (employees.find(emp => emp.name === name)) {
                alert('åŒã˜åå‰ã®ç¤¾å“¡ãŒæ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚');
                return;
            }
            
            const newEmployee = {
                name: name,
                password: password,
                registeredAt: new Date().toISOString()
            };
            
            employees.push(newEmployee);
            saveEmployees(employees);
            
            document.getElementById('newEmployeeName').value = '';
            document.getElementById('newEmployeePassword').value = '';
            
            showSuccess(`${name}ã•ã‚“ãŒç™»éŒ²ã•ã‚Œã¾ã—ãŸï¼`);
            loadAllEmployeeData();
        }

        // ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
        function exportData() {
            const data = {
                employees: JSON.parse(localStorage.getItem('employees') || '[]'),
                dailyReports: JSON.parse(localStorage.getItem('dailyReports') || '{}'),
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `eyelash-salon-data-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccess('ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼');
        }

        // ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
        function importData() {
            const file = document.getElementById('importFile').files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.employees) localStorage.setItem('employees', JSON.stringify(data.employees));
                    if (data.dailyReports) localStorage.setItem('dailyReports', JSON.stringify(data.dailyReports));
                    
                    showSuccess('ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼');
                    loadAllEmployeeData();
                } catch (error) {
                    alert('ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚');
                }
            };
            reader.readAsText(file);
        }

        // å…¨ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢
        function clearAllData() {
            if (confirm('æœ¬å½“ã«å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {
                localStorage.removeItem('employees');
                localStorage.removeItem('dailyReports');
                showSuccess('å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');
                loadAllEmployeeData();
            }
        }

        // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
        function logout() {
            currentUser = '';
            isAdmin = false;
            showScreen('loginScreen');
            showSuccess('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ');
        }

        // åˆæœŸåŒ–
        window.addEventListener('load', function() {
            // ç¾åœ¨ã®æœˆã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«è¨­å®š
            const currentMonth = new Date().toISOString().substr(0, 7);
            const summaryMonth = document.getElementById('summaryMonth');
            if (summaryMonth) {
                summaryMonth.value = currentMonth;
            }
            
            console.log('âœ… ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–å®Œäº† - å®Œå…¨å‹•ä½œä¿è¨¼ç‰ˆ v2');
        });
    </script>
</body>
</html>
